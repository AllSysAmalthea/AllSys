软件工程项目
赈灾管理系统需求分析文档
一、说明
    本文档主要对项目背景、项目功能等进行详细分析，明确项目所实现系统的需求、功能、使用环境。同时规划系统的应急措施。
    项目主体为开发一个赈灾管理系统，用于赈灾管理。项目名为（）
    项目为南京大学软件工程实验，由徐栋、李乾科、许迪文、李昀、缪静文协同完成。
二、背景分析
2.1 赈灾管理现状
    灾害主要包括但不仅限于以下几种：地震、火山爆发、洪涝、泥石流、台风、森林大火、旱灾、虫灾。当下的赈灾管理多采用人工管理的原始方式。

2.2 现状的缺点
    灾区现场，志愿者不远千里载着水和食物到达现场，却发现急缺的是药物；爱心人士献出自己的爱心却被无良人士骗走；救灾物资被堂而皇之出售，这些不和谐的情况时常发生。究其原因，在于不合理的赈灾管理系统，使得灾区情况不能被实时掌握，物资管理不够透明，受害者不能及时得到救助，效率很低。

2.3 赈灾系统XX的优点及可行性分析
    2.3.1 优点：
        2.3.1.1 将灾区的情况实时记录，并及时通知给志愿者、管理人员，让他们能掌握最新情况，及时制定或修改救援计划
        2.3.1.2 物资的分发和使用全部记录在数据库中，既能方便整体调度，减少物资分配不均的状况，也能充分透明化，避免物资被挪为他用。
        2.3.1.3 可以为受伤群众提供更及时的救助，给救援人员更精确的指导，减少伤亡率
    2.3.2 可行性分析：
        2.3.2.1 从经济角度分析，目前市场上尚无同类型的应用出现，一旦实现，竞争力很强
        2.3.2.2 从技术角度分析，目前强大的数据库功能、成熟的网站和app开发技术使集中管理成为可能
        2.3.2.3 从社会环境分析，可靠的移动网络基站，智能手机的普及率为项目的可行性提供了强大的后盾

三、详细需求分析
3.1 应用场景分析
    即可应用于灾区管理，也可用于各种场合的资源调配
3.2 适用人群分析
    适用于灾区管理人员、志愿者以及受灾群众
3.3 所需功能分析
    所需基本功能大致由以下几点：
        帮助有效查找和管理失踪人口，导入，修改灾区人口状态；（灾民管理）
        协调和平衡援助组织和志愿者的分工合作，志愿者注册后，决策者可以根据志愿者所在的位置信息为志愿者分配任务；（志愿者管理）
        登记、调配并跟踪援助请求和实施，可以接收，登记援助，并根据援助请求建立人物调度；（援助管理/任务请求管理）
        人员搜救任务，建立人员搜救任务并根据位置信息来分配人力，使救援人员和决策者可以随时知道谁在何时何地干什么。（任务管理及任务信息同步）
        登记并管理庇护所情况，位置，人员，灾民，物资等（庇护所信息、管理）
        库存管理，登记管理各地捐献的和国家调拨的赈灾物资（物资管理）
        消息模块，快速的传递，发布灾区信息（灾区信息管理）
    
    附加功能如下：
        物资捐献
        移动终端
        损失统计
        
    下面进行详细阐述    
    3.3.1 灾民管理
        灾民需要的普通个人信息有：姓名、性别、民族、出生年月、身份证号、户籍所在地、血型。
        除了普通的个人信息以外，还需要的特殊信息有：状态（失踪/死亡/受伤/其他）、亲属及联系方式；
        对失踪的需要有失踪时间及地点、失踪时的衣着；
        对死亡的需要有死亡时间及地点、尸体停放地点；
        对受伤的需要有基本的伤情（轻伤/重伤/痊愈）、就医医院（或转移中）。
        
    3.3.2 志愿者管理
        志愿者需要的普通个人信息有：姓名、性别、民族、出生年月、身份证号、户籍所在地、血型。
        除了普通的个人信息以外，还需要的特殊信息有：状态（待命/工作）；身高、体重；学历及特长；目前所在地；亲属及联系方式；特殊技能。

        考虑到灾民可能自愿成为志愿者，及志愿者可能在志愿活动中受伤或牺牲，需提供灾民与志愿者转化的方法。
    3.3.3 任务管理
        任务需要的信息有：名称、地点、开始及结束时间、状态（未开始/进行中/已结束）、参与人员、管理人员；
        对未开始的需要有需求物资及需求人员、特殊要求；
        对进行中的需要有任务进度；
        对已结束的需要有任务完成与否及报告。
    
    3.3.4 庇护所管理
        庇护所需要的信息有：地点、状态（空闲/一般/拥挤/爆满）、当前容纳人数、最大容纳人数、收容灾民列表、服务志愿者列表、管理人员、特殊设施。
    3.3.5 物资管理
        物资需要的信息有：名称、类型（消耗品/耐用品）、状态（未接收/库存/转运/使用中）、数量；
        对未接收的物资，需要有接收时间及地点；
        对库存的物资，需要有库存位置及最快转运速度；
        对转运的物资，需要有出发地、目的地、出发时间、（预计）到达时间、转运速度；已转运完成的物资需要有转运记录；
        考虑到以上三种状态的共同特点，专门使用物资仓库来管理物资；
        对使用中的物资，需要有使用地点；耐用品需要有租期并有相应的租借管理；消耗品需要有消耗速度及告罄时间。
    3.3.6 灾区信息
        灾区需要的信息有：地点及范围、受灾类型（地震/火山爆发/洪涝/泥石流/台风/森林大火/旱灾/虫灾/其他待补充）、灾难详细描述、灾民总数、交通状况、物资状况、救灾分析、二次灾害分析等；
    3.3.7 移动终端
        移动终端可以方便地为志愿者及外出执行任务的队伍提供移动访问系统的方法；
        利用百度/谷歌/高德地图提供的定位系统，为Android终端进行GPS定位，获取经纬坐标，可以使执行任务的队伍方便地知道自己当前的位置；
        利用终端提供的专用紧急通信功能，可以使发生突发状况时不用繁琐地编辑短信或者拨打电话，使用APP一键即可完成紧急通信。
    3.3.8 损失统计
        损失统计功能可以在赈灾活动尚未结束时便方便地为活动结束后的损失统计准备需要的信息；
        损失统计需要的信息有：受灾区域、灾民总数、死亡/重伤/轻伤人数统计（自然灾害）、建筑损毁/损伤统计（自然灾害）、农作物损失统计（旱灾/虫灾）、动产损失统计等。
    
3.4 性能分析
    3.4.1 网络时延
        考虑到灾区的网络可能损坏严重，建议使用可靠的TCP传输协议；而链路层协议及路由算法不能从应用层改变，故不作考虑。
    3.4.2 程序时延
        由于该系统主要都是对数据库进行操作，使用JDBC接口及SQL本身的时延是程序时延的主要来源，通常只要单次访问时延不超过RTT时间即可接受。
    3.4.3 服务器载荷
        服务器需要至少有同时为50个庇护所WEB终端及500个Android移动终端提供服务的性能，即需要实现至少550个线程并发执行的多线程处理能力。
        考虑到服务器负载过重对程序时延的影响，应在载荷过重时优先接受WEB终端的服务。
    3.4.4 信息更新频率
        对信息更新频率的要求分为以下几类讨论：
        I.对频率要求极高的，更新频率为1秒，主要为：灾区的最新情况，尤其是二次灾害的预警和通知；或者受伤灾民的伤情恶化；
        II.对频率要求较高的，更新频率为1分钟，主要为：灾民、志愿者的转移状态；庇护所的状态；任务状态；
        III.对频率要求一般的，更新频率为5小时，主要为：物资的使用状态及余量；
        IV.对频率要求低的，更新频率为1小时，主要为：失踪/已死亡灾民的信息；
        V.提供手动刷新全部信息的功能，但对限制刷新频率。
    
3.5 故障应对方案
    应对数据库故障：使用分布式数据库存储，每小时同步各个数据库信息；
    应对服务器网络故障：对服务器同样使用分布式，同时能相对优化各个终端的访问时延；
    应对服务器崩溃故障：使用相对稳定的后台线程程序管理服务线程，当收到socket请求时创建专用的服务线程；
    应对终端崩溃故障：向服务器提供崩溃信息，并完善程序。

四、运行平台细则
    服务器：
    Android终端：
